steps:
  - label: ":test_tube: FastVideo Tests"
    command: ".buildkite/scripts/run_tests.sh"
    timeout_in_minutes: 30
    retry:
      automatic:
        - exit_status: -1  # Agent lost
          limit: 2
        - exit_status: 255 # Forced agent shutdown
          limit: 2
    artifact_paths:
      - "*.log"
    env:
      BUILDKITE_CLEAN_CHECKOUT: "true"
      BUILDKITE_GIT_CLONE_FLAGS: "--depth=1 --single-branch"
      BUILDKITE_GIT_FETCH_FLAGS: "--depth=1"
      BUILDKITE_REPO_CLONE_RETRIES: "3"
      BUILDKITE_REPO_CLONE_RETRY_DELAY: "5"
    agents:
      queue: "default"
